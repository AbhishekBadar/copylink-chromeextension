<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Copy URL & QR Code Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ===== Design tokens (light-only) ===== */
    :root{
      --bg: #f6f8fb;
      --surface: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --border: #e6eaf1;
      --brand: #2563eb;
      --brand-600:#1d4ed8;
      --success:#16a34a;
      --success-600:#15803d;
      --warn:#f59e0b;
      --warn-600:#d97706;
      --shadow: 0 10px 30px rgba(15,23,42,.08);
      --radius: 12px;
      --radius-sm: 10px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      width: 360px;
      background: var(--bg);
      color: var(--text);
      font: 13px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Noto Sans",Arial,sans-serif;
      padding: 14px;
      border-radius: 16px;
      overflow: hidden;
    }

    /* ===== Header ===== */
    .header{
      display:flex;align-items:center;gap:10px;margin-bottom:12px
    }
    .logo{
      width:34px;height:34px;border-radius:10px;
      background: conic-gradient(from 210deg, var(--brand), #7c3aed 45%, #22c55e 90%);
      display:grid;place-items:center;color:#fff;font-weight:800;
      box-shadow: var(--shadow)
    }
    .title{margin:0;font-size:16px;letter-spacing:.2px}
    .sub{margin:0;color:var(--muted);font-size:12px}

    /* ===== Cards ===== */
    .card{
      background:var(--surface);border:1px solid var(--border);
      border-radius:var(--radius);box-shadow:var(--shadow)
    }

    /* URL display */
    .url-wrap{padding:10px}
    .url-label{display:flex;align-items:center;gap:6px;margin:0 0 6px;color:var(--muted);font-weight:600;font-size:12px}
    .url-display{
      padding:10px;border:1px dashed var(--border);border-radius:10px;
      word-break:break-all;color:#334155;max-height:80px;overflow:auto;background:#f9fbff
    }

    /* Format select */
    .section{margin:12px 0}
    .label{display:block;margin:0 0 6px;color:var(--muted);font-size:12px;font-weight:700}
    .select{
      width:100%;appearance:none;background:var(--surface);color:var(--text);
      padding:10px 12px;border:1px solid var(--border);border-radius:10px;outline:none;
      transition:border-color .2s, box-shadow .2s;
      background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
      background-repeat:no-repeat;background-position:right 12px center;background-size:14px
    }
    .select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(37,99,235,.12)}

    /* Buttons */
    .button-group{
      display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px
    }
    #qrCodeBtn{grid-column:1 / -1}

    .btn{
      appearance:none;border:none;cursor:pointer;
      padding:11px 12px;border-radius:var(--radius-sm);
      color:#fff;font-weight:700;letter-spacing:.2px;
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      box-shadow:var(--shadow);
      transition:transform .06s ease, background-color .2s ease, box-shadow .2s
    }
    .btn:active{transform:translateY(1px)}
    .btn svg{width:16px;height:16px}

    .btn-primary{background:var(--brand)}
    .btn-primary:hover{background:var(--brand-600)}
    .btn-success{background:var(--success)}
    .btn-success:hover{background:var(--success-600)}
    .btn-warn{background:var(--warn)}
    .btn-warn:hover{background:var(--warn-600)}

    /* History */
    .history-section{border-top:1px solid var(--border);padding-top:12px;margin-top:8px}
    .history-title{margin:0 0 8px;color:var(--muted);font-weight:800;font-size:12px}
    .history-item{
      background:var(--surface);border:1px solid var(--border);border-radius:10px;
      padding:8px;cursor:pointer;margin-bottom:6px;transition:background .2s,border-color .2s,transform .06s
    }
    .history-item:hover{background:#f8fafc;border-color:#dbe3ef}
    .history-title-text{margin:0 0 2px;font-weight:700;font-size:12px;color:#0f172a}
    .history-url{font-size:11px;color:var(--muted);word-break:break-all}

    /* Footer */
    .footer{display:flex;justify-content:center;margin-top:10px;padding-top:8px;border-top:1px solid var(--border)}
    .options-link{color:var(--brand);text-decoration:none;font-weight:700}
    .options-link:hover{text-decoration:underline}

    /* Toast */
    .notification{
      position:fixed;top:8px;right:8px;
      background:var(--success);color:#fff;padding:8px 12px;border-radius:999px;font-size:12px;
      z-index:1000;opacity:0;pointer-events:none;transform:translateY(-6px);
      transition:opacity .25s, transform .25s;box-shadow:var(--shadow)
    }
    .notification.show{opacity:1;transform:translateY(0)}

    /* Modal */
    .qr-modal{display:none;position:fixed;inset:0;background:rgba(15,23,42,.35);z-index:2000}
    .qr-modal.show{display:flex;align-items:center;justify-content:center}
    .qr-modal-content{
      background:var(--surface);border:1px solid var(--border);border-radius:16px;
      width:min(380px,94%);max-height:90vh;overflow:hidden;box-shadow:var(--shadow)
    }
    .qr-header{
      display:flex;align-items:center;justify-content:space-between;gap:8px;
      padding:12px 14px;background:linear-gradient(135deg,var(--brand),#7c3aed);color:#fff
    }
    .qr-header h3{margin:0;font-size:15px}
    .qr-close{
      background:transparent;border:1px solid rgba(255,255,255,.5);
      color:#fff;width:28px;height:28px;border-radius:8px;display:grid;place-items:center;cursor:pointer
    }
    .qr-close:hover{background:rgba(255,255,255,.15)}

    .qr-body{padding:14px}
    #qrCodeContainer{
      margin:0 auto 10px;padding:10px;border:1px dashed var(--border);border-radius:12px;background:#f8fafc;
      display:flex;align-items:center;justify-content:center
    }
    #qrCodeContainer canvas{max-width:100%;height:auto;border-radius:8px;image-rendering:pixelated}
    .qr-url{
      font-size:12px;color:var(--muted);word-break:break-all;
      padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--surface);margin-bottom:12px
    }
    .qr-actions{display:flex;gap:8px}
    .qr-action-btn{
      flex:1;appearance:none;border:none;border-radius:10px;padding:10px 12px;color:#fff;font-weight:700;cursor:pointer;box-shadow:var(--shadow)
    }
    #downloadQrBtn{background:var(--warn)}
    #downloadQrBtn:hover{background:var(--warn-600)}
    #copyQrBtn{background:var(--brand)}
    #copyQrBtn:hover{background:var(--brand-600)}

    /* Focus states */
    button, .select, .history-item, .options-link, .qr-close{outline:2px solid transparent;outline-offset:2px}
    button:focus-visible, .select:focus-visible, .history-item:focus-visible, .options-link:focus-visible, .qr-close:focus-visible{
      outline-color: rgba(37,99,235,.45);
    }

    /* Custom Scrollbars - Inside UI */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
      border: 2px solid transparent;
      background-clip: content-box;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--muted);
      background-clip: content-box;
    }

    ::-webkit-scrollbar-corner {
      background: transparent;
    }

    /* Specific scrollbar styling for scrollable elements */
    .url-display::-webkit-scrollbar,
    .qr-url::-webkit-scrollbar {
      width: 6px;
    }

    .url-display::-webkit-scrollbar-thumb,
    .qr-url::-webkit-scrollbar-thumb {
      background: rgba(100, 116, 139, 0.3);
      border-radius: 3px;
      border: 1px solid transparent;
      background-clip: content-box;
    }

    .url-display::-webkit-scrollbar-thumb:hover,
    .qr-url::-webkit-scrollbar-thumb:hover {
      background: rgba(100, 116, 139, 0.5);
      background-clip: content-box;
    }

    /* Firefox scrollbar styling */
    .url-display,
    .qr-url {
      scrollbar-width: thin;
      scrollbar-color: rgba(100, 116, 139, 0.3) transparent;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="logo">ðŸ”—</div>
    <div>
      <h3 class="title">Copy URL & QR</h3>
      <p class="sub">Clean URL tools for daily use</p>
    </div>
  </div>

  <!-- URL Card -->
  <div class="card url-wrap">
    <div class="url-label">
      <!-- chain icon -->
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.07 0l2.83-2.83a5 5 0 1 0-7.07-7.07L10 5"/><path d="M14 11a5 5 0 0 0-7.07 0L4.1 13.83a5 5 0 1 0 7.07 7.07L14 19"/></svg>
      Current URL
    </div>
    <div class="url-display" id="currentUrl">Loading current URL...</div>
  </div>

  <!-- Format -->
  <div class="section">
    <label for="copyFormat" class="label">Copy format</label>
    <select id="copyFormat" class="select">
      <option value="plain">Plain URL</option>
      <option value="markdown">Markdown link</option>
      <option value="html">HTML link</option>
    </select>
  </div>

  <!-- Actions -->
  <div class="button-group">
    <button class="btn btn-primary" id="copyBtn" title="Copy just the URL">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 17h8M8 13h8M16 21H8a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4h5l7 7v7a4 4 0 0 1-4 4Z"/><path d="M14 3v4a2 2 0 0 0 2 2h4"/></svg>
      Copy URL
    </button>

    <button class="btn btn-success" id="copyTitleBtn" title="Copy page title + URL">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8M16 17H8M10 9H8"/></svg>
      Copy Title + URL
    </button>

    <button class="btn btn-warn" id="qrCodeBtn" title="Generate a scannable QR">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2"/><path d="M12 18h.01"/></svg>
      Generate QR Code
    </button>
  </div>

  <!-- History -->
  <div class="history-section" id="historySection">
    <div class="history-title">Recent URLs</div>
    <div id="historyList"></div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <a href="#" id="optionsLink" class="options-link">Settings</a>
  </div>

  <!-- QR Modal -->
  <div id="qrModal" class="qr-modal" aria-modal="true" role="dialog">
    <div class="qr-modal-content">
      <div class="qr-header">
        <h3>QR Code</h3>
        <button class="qr-close" id="qrCloseBtn" aria-label="Close">&times;</button>
      </div>
      <div class="qr-body">
        <div id="qrCodeContainer"></div>
        <div class="qr-url" id="qrUrl"></div>
        <div class="qr-actions">
          <button class="qr-action-btn" id="downloadQrBtn">ðŸ’¾ Download</button>
          <button class="qr-action-btn" id="copyQrBtn">ðŸ“‹ Copy Image</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Load QR lib once, then your logic -->
  <script src="lib/qrcode.min.js"></script>
  <script src="popup.js"></script>
</body>
</html>
